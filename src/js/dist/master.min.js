const url="https://api.tech.redventures.com.br",headers={"x-api-key":"ZtVdh8XQ2U8pWI2gmZ7f796Vh8GllXoN7mr0djNf"},loaderModal=document.getElementById("loader-modal"),showLoader=()=>{loaderModal.style.display="flex"},hideLoader=()=>{loaderModal.style.display="none"};function createRadioButton(o,n){var e=document.createElement("div");const t=document.createElement("input");var r=document.createElement("label");const a=document.createElement("img");var d=document.createElement("p"),c=document.createElement("p"),s=document.createElement("p");const i=document.getElementById("btn-order");return e.classList.add("input-wrapper"),e.classList.add("input-"+n),d.classList.add("description"),c.classList.add("price"),s.classList.add("name"),r.htmlFor=o.name,s.innerHTML=o.name,a.src=o.imageInactive,d.innerHTML=o.description,c.innerHTML="US$ "+o.price,t.type="radio",t.id=o.name,t.name=""+n,t.value=o.id,t.addEventListener("change",()=>{document.querySelectorAll(".input-"+n).forEach(e=>{var t=e.querySelector(`input[name='${n}']`),r=e.querySelector("img");t.checked?(r.src=o.imageActive,e.classList.add("active")):(r.src=t.dataset.imageInactive,e.classList.remove("active"))});var e=document.querySelector('input[name="brothId"]:checked'),t=document.querySelector('input[name="proteinId"]:checked');i.disabled=!e||!t}),e.addEventListener("mouseover",()=>{t.checked||(a.src=o.imageActive)}),e.addEventListener("mouseout",()=>{t.checked||(a.src=o.imageInactive)}),t.dataset.imageInactive=o.imageInactive,r.appendChild(a),r.appendChild(s),r.appendChild(d),r.appendChild(c),e.appendChild(t),e.appendChild(r),e}const getBroths=async()=>{showLoader(),await fetch(url+"/broths",{headers:headers}).then(e=>e.json()).then(e=>{const t=document.getElementById("radio-container-1");t.innerHTML="",e.forEach(e=>{e=createRadioButton(e,"brothId");t.appendChild(e)})}).catch(e=>{console.log(e)}).finally(hideLoader())},getProteins=async()=>{showLoader(),await fetch(url+"/proteins",{headers:headers}).then(e=>e.json()).then(e=>{const t=document.getElementById("radio-container-2");t.innerHTML="",e.forEach(e=>{e=createRadioButton(e,"proteinId");t.appendChild(e)})}).catch(e=>{console.log(e)}).finally(hideLoader())},postOrder=async e=>{var t=document.querySelector('input[name="brothId"]:checked'),r=document.querySelector('input[name="proteinId"]:checked');t&&r?(showLoader(),t=new FormData(e),r=Object.fromEntries(t),await fetch(url+"/orders",{method:"POST",headers:headers,body:JSON.stringify(r)}).then(e=>e.json()).then(e=>{sessionStorage.setItem("dataOrder",JSON.stringify(e)),window.location.replace("/success-order.html")}).catch(e=>{console.log(e),hideLoader()})):alert("Please select a broth and protein before placing the order.")},getLocalOrder=()=>{var e,t,r=JSON.parse(sessionStorage.getItem("dataOrder"));r&&(e=document.getElementById("img-order-success"),t=document.getElementById("title-order-success"),e.src=r.image,t.innerHTML=r.description),hideLoader()},form=document.getElementById("orderForm");function scrollToSection(e){e.preventDefault();e=e.currentTarget.getAttribute("href"),e=document.querySelector(e).offsetTop;window.scroll({top:e,behavior:"smooth"})}form&&form.addEventListener("submit",e=>{e.preventDefault(),postOrder(e.target)});const scrollToTrigger=document.getElementById("scrollTo"),logoMenuImg=document.getElementById("menuImg");"/"===window.location.pathname&&(scrollToTrigger.addEventListener("click",scrollToSection),logoMenuImg.src="./src/assets/images/logo.svg",getBroths(),getProteins()),"/success-order.html"===window.location.pathname&&(logoMenuImg.src="./src/assets/images/logo-laranja.svg",getLocalOrder());